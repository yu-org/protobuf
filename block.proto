syntax = "proto3";

option go_package = "./goproto";
import "txn.proto";

message Block {
    CompactBlock CompactBlock = 1;
    repeated SignedTxn Txns = 2;
}

message CompactBlock {
    Header Header = 1;
    repeated bytes TxnsHashes = 2;
}

message Header {
    bytes Hash = 1;
    bytes PrevHash = 2;
    uint64 Height = 3;

    bytes TxnRoot = 4;
    bytes StateRoot = 5;

    uint64 Timestamp = 6;
    string PeerID = 7;

    uint64 LeiLimit = 8;
    uint64 LeiUsed = 9;

    repeated Validator Validators = 10;
    Proof Proof = 11;

    PowInfo PowInfo = 12;

    bytes Extra = 13;
}

message Validator {
    bytes PubKey = 1;
    uint64 ProposeWeight = 2;
    uint64 VoteWeight = 3;
}

message Proof {
    bytes BlockHash = 1;
    uint64 Height = 2;
    bytes PubKey = 3;
    bytes Signature = 4;
    bytes VrfProof = 5;
}

message PowInfo {
    uint64 Nonce = 1;
    uint64 Difficulty = 2;
    bytes Signature = 3;
}